<div class="bg-scroll-1"></div>
<div class="bg-scroll-2"></div>
<!-- Filtros búsqueda -->
<div class="content-wrapper-top">
  <div style="margin-top: 4vw;position:relative">
    <div class="burbuja-title">
      <h1>¿Qué puedo cazar ahora?</h1>
    </div>
    <img (click)="cambiaHemisferio()" [src]="isNorth ? '../../../assets/images/hemisferio-norte.png': '../../../assets/images/hemisferio-sur.png'" class="editar editar-top-left img-radio" style="width: unset;height: unset;">
    <div id="wrap-filtros" class="flex-centered" style="align-items: unset;">
      <div style="width: 35%;justify-content: unset" class="flex-column-centered">
        <h3>Lugar</h3>
        <div class="flex-centered" style="flex-wrap: wrap;" id="filtro-lugar">
          <button class="boton-alargado b-scale" (click)="filtraWhe('On trees (any kind)')" [class]="this.filtroAcWhe == 'On trees (any kind)' ? 'b-verde' : 'b-azul b-azul-hover'">Sobre árboles (cualquier tipo)</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('On hardwood/cedar trees')" [class]="this.filtroAcWhe == 'On hardwood/cedar trees' ? 'b-verde' : 'b-azul b-azul-hover'">Sobre árboles hardwood o cedar</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('Flying near flowers')" [class]="this.filtroAcWhe == 'Flying near flowers' ? 'b-verde' : 'b-azul b-azul-hover'">Volando cerca de flores</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('Flying near water')" [class]="this.filtroAcWhe == 'Flying near water' ? 'b-verde' : 'b-azul b-azul-hover'">Volando cerca del agua</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('On tree stumps')" [class]="this.filtroAcWhe == 'On tree stumps' ? 'b-verde' : 'b-azul b-azul-hover'">Sobre tocones</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('Flying')" [class]="this.filtroAcWhe == 'Flying' ? 'b-verde' : 'b-azul b-azul-hover'">Volando</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('On the ground')" [class]="this.filtroAcWhe == 'On the ground' ? 'b-verde' : 'b-azul b-azul-hover'">En el suelo</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('On flowers')" [class]="this.filtroAcWhe == 'On flowers' ? 'b-verde' : 'b-azul b-azul-hover'">Sobre flores</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('On rivers/ponds')" [class]="this.filtroAcWhe == 'On rivers/ponds' ? 'b-verde' : 'b-azul b-azul-hover'">Sobre ríos o estanques</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('On palm trees')" [class]="this.filtroAcWhe == 'On palm trees' ? 'b-verde' : 'b-azul b-azul-hover'">Sobre palmeras</button>
          <button class="boton-alargado b-scale" (click)="filtraWhe('Other')" [class]="this.filtroAcWhe == 'Other' ? 'b-verde' : 'b-azul b-azul-hover'">Otros</button>
        </div>
      </div>
      <div style="width: 20%;justify-content: unset;margin: 0 1vw" class="flex-column-centered">
        <h3>Clima</h3>
        <div class="flex-centered" style="flex-wrap: wrap;" id="filtro-clima">
          <button class="boton-alargado b-scale" (click)="filtraWe('Any weather')" [class]="this.filtroAcWe == 'Any weather' ? 'b-verde' : 'b-azul b-azul-hover'">Cualquier clima</button>
          <button class="boton-alargado b-scale" (click)="filtraWe('Any except rain')" [class]="this.filtroAcWe == 'Any except rain' ? 'b-verde' : 'b-azul b-azul-hover'">Cualquier clima menos lluvia</button>
          <button class="boton-alargado b-scale" (click)="filtraWe('Rain only')" [class]="this.filtroAcWe == 'Rain only' ? 'b-verde' : 'b-azul b-azul-hover'">Solo durante lluvia</button>
        </div>
      </div>

        <div class="flex-column-centered" style="width: 35%;">
          <input [formControl]="busqueda" class="text-input" style="width: 80%;margin-top: 2vw" type="text" placeholder="Buscar">
          <div class="flex-centered">
            <div class="flex-centered">
              <button (click)="volverFechaActual()" id="volver" class="b-scale boton-imagen" style="margin-right:1vw"></button>
              <div class="flex-column-centered" id="time-wrap">
                <div class="flex-centered" style="margin-top:1vw">
                  <h4>Hora:</h4>
                  <input class="text-input input-hora" [formControl]="hora" type="number">
                </div>
                <div class="flex-centered">
                  <h4>Mes:</h4>
                  <select class="text-input input-mes" [formControl]="mes">
                    <ng-container *ngFor="let mes of meses | keyvalue">
                      <option value="{{mes.key}}">{{mes.value}}</option>
                    </ng-container>
                  </select>
                </div>
              </div>
            </div>
            <div class="flex-column-centered" style="margin:0.5vw" [style.display]="this._verif.user == null ? 'none' : 'flex'" id="filtro-usuario">
              <button class="boton-alargado b-scale" (click)="activaFiltro('obtenido')" [class]="this.botonFiltrar == 'obtenido' ? 'b-verde' : 'b-azul  b-azul-hover'">Obtenidos</button>
              <button class="boton-alargado b-scale" (click)="activaFiltro('falta')" [class]="this.botonFiltrar == 'falta' ? 'b-verde' : 'b-azul  b-azul-hover'">Me faltan</button>
            </div>
          </div>
        </div>
        <div class="flex-column-centered" style="width: 5vw;" id="ser-wrap">
          <button class="boton-imagen b-verde" [style.background-image]="'url(../../../assets/images/insecto-icon.png)'"></button>
          <button class="boton-imagen b-scale b-azul b-azul-hover" [style.background-image]="'url(../../../assets/images/pez-icon.png)'" (click)="cambiaSer('peces')"></button>
          <button class="boton-imagen b-scale b-azul b-azul-hover" [style.background-image]="'url(../../../assets/images/criatura-marina-icon.png)'" (click)="cambiaSer('criaturasMarinas')"></button>
        </div>

    </div>
  </div>
</div>

    <!-- Items -->
  <div class="content-wrapper-bot" style="min-height: 22vw;">

    <!-- Paginacion arriba -->
    <div class="pag-menu flex-centered">
      <button [style.visibility]="page_number != 1 ? 'visible' : 'hidden'" class="boton-circular b-azul-hover b-scale" (click)="page_number = this._pag.pagAtras(page_number)"> < </button>
      <ng-container *ngIf="this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length < 25; else paginacionComprimida">
        <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter)">
          <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
        </ng-container>
      </ng-container>

      <ng-template #paginacionComprimida>
        <!-- Paginacion start -->
        <ng-container *ngIf="page_number < 11">
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(0, 11)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 2, this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length)">
            <button class="b-darkBlue b-scale b-pag" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
        </ng-container>

        <!-- Paginacion mid -->
        <ng-container #mid *ngIf="10 < page_number && page_number < this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length - 10">
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).slice(0, 2)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(page_number-4, page_number+3)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 2, this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length)">
            <button class="b-darkBlue b-scale b-pag" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
        </ng-container>

        <!-- Paginacion end -->
        <ng-container #midOfin *ngIf="this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length - 11 < page_number">
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(0, 2)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 12, this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
        </ng-container>

      </ng-template>

      <button [style.visibility]="max_items < listaCreatures.length && page_number * max_items < (listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length ? 'visible' : 'hidden'" class="boton-circular b-azul-hover b-scale" (click)="page_number = this._pag.pagAlante(page_number, max_items, listaCreatures)"> > </button>
    </div>

    <!-- Grid -->
    <div class="grid-w-gap" style="margin: 1vw 0">
        <ng-container *ngFor="let creature of listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter | paginacion:page_number:max_items">
          <div class="grid-item-wrap flex-column-centered" style="justify-content: space-evenly;">
            <div class="check-container" *ngIf="this._verif.user != null">
              <button [style.background-image]="this.listaUsuario.includes(creature.translations.spanish.replace(' ','')) ? 'url(../../assets/images/check-rojo.png)' : 'url(../../assets/images/check-gris.png)'" class=" b-scale-xl boton-imagen editar" (click)="toggleCheck(creature)"></button>
            </div>
            <div style="width: 8vw; height: 8vw;" class="wrap-scale flex-centered">
              <img (click)="mostrar($event, creature)" [src]="creature.critterpediaImage" style="cursor: pointer;max-width: 100%;max-height: 100%;" [id]='creature.translations.spanish.replace(" ", "")'>
            </div>
            <span>{{creature.translations.spanish | capitalize}}</span>
          </div>
        </ng-container>
    </div>

    <ng-container *ngIf="(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter | paginacion:page_number:max_items).length == 0" >
      <div class="flex-column-centered no-result" style="margin: 3% 0">
        <img src="../../assets/images/error.png" style="width: 10vw;">
        <p><strong>No hubo resultados</strong></p>
      </div>
    </ng-container>

    <!-- Paginacion abajo -->
    <div class="pag-menu flex-centered" [style.padding-top]="(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter | paginacion:page_number:max_items).length < 6 ? '14vw' : '0' ">
      <button [style.visibility]="page_number != 1 ? 'visible' : 'hidden'" class="boton-circular b-azul-hover b-scale" (click)="page_number = this._pag.pagAtras(page_number)"> < </button>

      <ng-container *ngIf="this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length < 25; else paginacionComprimida">
        <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter)">
          <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
        </ng-container>
      </ng-container>

      <ng-template #paginacionComprimida>
        <!-- Paginacion start -->
        <ng-container *ngIf="page_number < 11">
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(0, 11)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 2, this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length)">
            <button class="b-darkBlue b-scale b-pag" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
        </ng-container>

        <!-- Paginacion mid -->
        <ng-container #mid *ngIf="10 < page_number && page_number < this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 10">
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(0, 2)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(page_number-4, page_number+3)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 2, this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length)">
            <button class="b-darkBlue b-scale b-pag" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
        </ng-container>

        <!-- Paginacion end -->
        <ng-container #midOfin *ngIf="this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length - 11 < page_number">
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(0, 2)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
          <button class="b-darkBlue b-pag">·</button>
          <button class="b-darkBlue b-pag">·</button>
          <ng-container *ngFor="let pag of this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).slice(this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length - 12, this.getPaginas(listaCreatures | cazable:isNorth:mes.value:hora.value | filtroAc:nameFilter).length)">
            <button [class]="pag == page_number ? 'b-darkGreen b-pag' : 'b-darkBlue b-scale b-pag'" (click)="page_number = pag">{{pag}}</button>
          </ng-container>
        </ng-container>

      </ng-template>

      <button [style.visibility]="max_items < listaCreatures.length && page_number * max_items < (listaCreatures | cazable:isNorth:mes.value:hora.value | filtroCategoria:filtroAcWhe:filtroAcWe | filtroAc:nameFilter).length ? 'visible' : 'hidden'" class="boton-circular b-azul-hover b-scale" (click)="page_number = this._pag.pagAlante(page_number, max_items, listaCreatures)"> > </button>
    </div>

  </div>
    <!--   Pop-ups   -->
    <div class="panel flex-between" [style.display]="hide ? 'none': 'flex'" (clickOutside)="cierraMenu()">

      <div class="flex-column-centered" style="margin-left:3vw;max-width: 60%;max-height: 31vw;">
        <div class="flex-column-centered">
          <img [src]="shownCreature.critterpediaImage" style="max-width: 100%;max-height: 10vw" [id]='shownCreature.translations.spanish.replace(" ", "")'>
          <p><strong>{{shownCreature.translations.spanish | capitalize}}</strong></p>
        </div>
        <div>
          <p><strong>Donde obtener:</strong> {{shownCreature.whereHow | traducir | capitalize}}</p>
          <p><strong>Clima:</strong> {{shownCreature.weather | traducir | capitalize}}</p>
          <p><strong>Precio:</strong> {{shownCreature.sell}}</p>
          <div style="display: flex;">
            <span><strong>Horario:</strong></span>
            <div class="flex-column-centered" style="margin-left: 0.4vw;">
              <ng-container *ngFor="let hora of this.shownCreatureHoras">
                <span>{{hora | traducir }}</span>
              </ng-container>
            </div>
          </div>
        </div>
      </div>

      <div class="flex-column-centered">
        <ng-container *ngFor="let mes of meses | keyvalue">
          <span class="boton-alargado no-pointer" style="margin: 0.2vw 0;width: 100%;" [class]="shownCreatureMeses.includes(mes.key)? 'b-verde' : 'b-azul'">{{mes.value}}</span>
        </ng-container>
      </div>
    </div>

